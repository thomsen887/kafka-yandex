# PR3 Messaging Filter System (–Ω–∞ –±–∞–∑–µ Kafka + Goka)

–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Å–∏—Å—Ç–µ–º—É —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Kafka —Å –ø–æ–º–æ—â—å—é —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ Goka. –û–Ω –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è:

- —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã—Ö —Å–ª–æ–≤;
- –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π;
- —Ä–∞—Å—à–∏—Ä—è–µ–º—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ø–æ—Ç–æ–∫–æ–≤ –∏ —Ç–∞–±–ª–∏—Ü.

## üß± –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞

### 1. **filter**
–§–∏–ª—å—Ç—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã—Ö —Å–ª–æ–≤. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç:
- —Ç–∞–±–ª–∏—Ü—É `pr3_banned_words-table` (–≥—Ä—É–ø–ø–æ–≤–∞—è) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ —Å–ª–æ–≤;
- –ø–æ—Ç–æ–∫ `pr3_for_filter` (–≤—Ö–æ–¥);
- –ø–æ—Ç–æ–∫ `pr3_filtered_messages` (–≤—ã—Ö–æ–¥).

–ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ —Å–ª–æ–≤–∞ ‚Äî –∑–∞–º–µ–Ω—è–µ—Ç –∏—Ö –Ω–∞ `***`.

### 2. **emitter**
–ò–º–∏—Ç–∏—Ä—É–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –ü—É–±–ª–∏–∫—É–µ—Ç –≤ Kafka —Ç–æ–ø–∏–∫ `pr3_for_filter`.

### 3. **blocker**
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É `pr3_blocked_users-table`, –∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

### 4. **cmd/banned-words**
–û–±–Ω–æ–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã—Ö —Å–ª–æ–≤:
- —á–∏—Ç–∞–µ—Ç –∏–∑ Kafka —Ç–æ–ø–∏–∫–∞ `pr3_banned_words`;
- –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü—É `pr3_banned_words-table` –ø–æ–¥ –∫–ª—é—á–æ–º `"system"`.

### 5. **cmd/block-user**
–ü–æ–∑–≤–æ–ª—è–µ—Ç –≤—Ä—É—á–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ Kafka.

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

> –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è: —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Kafka, ZooKeeper, Go 1.20+, –∏ —Ç–æ–ø–∏–∫–∏ —Å–æ–∑–¥–∞–Ω—ã –∑–∞—Ä–∞–Ω–µ–µ.

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
cd practic3
go mod tidy
